<!-- SIGN-UP FORM VIEW -->
<div *ngIf="!newUser" class="container d-flex justify-content-center align-items-center default-bg">
  <div class="card p-4 shadow formDiv">

    <button type="button" routerLink="/home" class="btn-close position-absolute top-0 end-0 m-3"
      aria-label="Close"></button>

    <h4 class="text-center mb-4">Sign up</h4>

    <form [formGroup]="signUpForm" (ngSubmit)="registerUser()" novalidate>

      <!-- Login Name -->
      <div class="mb-3">
        <input type="text" class="form-control" formControlName="userName" [ngClass]="getValidationClass('userName')"
          placeholder="Login name" />
        <div class="invalid-feedback" *ngIf="userName?.hasError('required') && (userName?.touched || userName?.dirty)">
          Login name is required.
        </div>
        <div class="invalid-feedback" *ngIf="userName?.hasError('minlength') && !userName?.hasError('required')">
          Login name must be at least 5 characters.
        </div>
      </div>

      <!-- First Name -->
      <div class="mb-3">
        <input type="text" class="form-control" formControlName="firstName" [ngClass]="getValidationClass('firstName')"
          placeholder="First Name" />
        <div class="invalid-feedback"
          *ngIf="firstName?.hasError('required') && (firstName?.touched || firstName?.dirty)">
          First name is required.
        </div>
      </div>

      <!-- Last Name -->
      <div class="mb-3">
        <input type="text" class="form-control" formControlName="lastName" [ngClass]="getValidationClass('lastName')"
          placeholder="Last Name" />
        <div class="invalid-feedback" *ngIf="lastName?.hasError('required') && (lastName?.touched || lastName?.dirty)">
          Last name is required.
        </div>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <input type="email" formControlName="userEmail" class="form-control" [ngClass]="getValidationClass('userEmail')"
          placeholder="Email" />
        <div class="invalid-feedback" *ngIf="userEmail?.hasError('required')">
          Email is required.
        </div>
        <div class="invalid-feedback" *ngIf="userEmail?.hasError('pattern') && !userEmail?.hasError('required')">
          Please enter a valid email address.
        </div>
      </div>


      <!-- Phone -->
      <div class="mb-3">
        <input type="tel" formControlName="phoneNumber" class="form-control"
          [ngClass]="getValidationClass('phoneNumber')" placeholder="Phone Number" />
        <div class="invalid-feedback" *ngIf="phoneNumber?.hasError('required')">
          Phone number is required.
        </div>
        <div class="invalid-feedback" *ngIf="phoneNumber?.hasError('pattern') && !phoneNumber?.hasError('required')">
          Please enter a valid phone number (10â€“15 digits).
        </div>
      </div>

      <!-- Password -->
      <div class="mb-3">
        <input type="password" class="form-control" formControlName="password"
          [ngClass]="getValidationClass('password')" placeholder="Password" />
        <div class="invalid-feedback" *ngIf="password?.hasError('required')">
          Password is required.
        </div>
        <div class="invalid-feedback" *ngIf="password?.hasError('minlength')">
          Minimum 8 characters required.
        </div>
        <div class="invalid-feedback" *ngIf="password?.hasError('maxlength')">
          Maximum 25 characters allowed.
        </div>
      </div>

      <!-- User Roles -->
      <div class="mb-3">
        <select class="form-select" formControlName="userRole" [ngClass]="getValidationClass('userRole')">
          <option value="" disabled>Select a role</option> 
          <option value="user">User</option>
          <option value="tester">Tester</option>
          <option value="manager">Manager</option>
          <option value="support">Support</option>
          <option value="viewer">Viewer</option>
        </select>
        <div class="invalid-feedback" *ngIf="userRole?.hasError('required') && (userRole?.touched || userRole?.dirty)">
          Please select a role.
        </div>
      </div>



      <!-- Submit Button -->
      <div class="d-grid mb-3">
        <button type="submit" class="btn signUpBtn" [disabled]="signUpForm.invalid">Sign Up</button>
      </div>

      <p class="text-center mb-0" style="font-size: 14px;">
        Already have an account?
        <a routerLink="/login" class="fw-bold text-primary loginButton">Log In</a>
      </p>

    </form>
  </div>
</div>



<!-- PROFILE VIEW AFTER SIGN-UP -->
<div *ngIf="newUser" class="container rounded bg-white mt-5 mb-5 shadow p-4"
  style="max-width: 800px; margin-top: 200px;">
  <div class="row d-flex align-items-center">

    <!-- Left: Profile Picture -->
    <div class="col-md-4 text-center">
      <img class="rounded-circle" width="120px" src="https://cdn-icons-png.flaticon.com/512/921/921347.png"
        alt="Profile" />
      <h5 class="mt-3">{{ newUser.userName }}</h5>
    </div>

    <!-- Right: Profile Details -->
    <div class="col-md-8">
      <h4 class="mb-4 text-center">
        <i class="bi bi-person-fill text-primary" style="margin-left: -180px;"></i> ðŸ‘¤ User Profile
      </h4>
      <hr />

      <div class="row mb-3">
        <div class="col-5 fw-semibold">First Name:</div>
        <div class="col-7">{{ newUser.firstName }}</div>
      </div>

      <div class="row mb-3">
        <div class="col-5 fw-semibold">Last Name:</div>
        <div class="col-7">{{ newUser.lastName }}</div>
      </div>

      <div class="row mb-3">
        <div class="col-5 fw-semibold">Phone Number:</div>
        <div class="col-7">{{ newUser.phoneNumber }}</div>
      </div>

      <div class="row mb-3">
        <div class="col-5 fw-semibold">Email:</div>
        <div class="col-7">{{ newUser.userEmail }}</div>
      </div>

      <div class="text-center mt-4">
        <button class="btn btn-outline-secondary" style="margin-left: -120px; max-width: 100px; min-width: 100px;"
          routerLink="/login">Login</button>
      </div>
    </div>
  </div>
</div>