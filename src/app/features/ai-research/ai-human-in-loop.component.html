<div class="card shadow-sm">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-2 human-header-row">
      <h5 class="card-title mb-0">Human-in-the-Loop Impact</h5>
      <button type="button" class="btn btn-outline-secondary btn-sm human-back-btn" (click)="goBack()">
        Back to Home
      </button>
    </div>

    <p class="text-muted small mb-3">
      Quantifies how involving a human engineer in the prompting loop changes estimation quality and research relevance.
    </p>

    <div *ngIf="isLoading" class="small text-muted">Loading human-in-the-loop analysis...</div>
    <div *ngIf="error" class="text-danger small">{{ error }}</div>

    <div *ngIf="result">
      <app-grouped-bar-chart
        [categories]="labels"
        [seriesALabel]="'Quality score'"
        [seriesBLabel]="'Relevance score'"
        [seriesAValues]="qualityValues"
        [seriesBValues]="relevanceValues">
      </app-grouped-bar-chart>

      <p class="chart-caption small text-muted mt-2">
        Figure: Grouped bar chart showing human-in-the-loop impact on estimation quality and research relevance (with vs without user prompts).
      </p>

      <h6 class="mt-3">Raw Human-in-the-Loop Metrics</h6>
      <pre class="small bg-light p-2 border rounded">{{ result | json }}</pre>
    </div>
  </div>
</div>
