<div class="card shadow-sm">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-2 summary-header-row">
      <h5 class="card-title mb-0">Research Summary &amp; Thesis Conclusion</h5>
      <button type="button" class="btn btn-outline-secondary btn-sm summary-back-btn" (click)="goBack()">
        Back to Home
      </button>
    </div>

    <p class="text-muted small mb-3">
      Synthesises the key findings from bias, stability, explainability and human-in-the-loop experiments into a thesis-ready conclusion.
    </p>

    <div *ngIf="isLoading" class="small text-muted">Loading research summary...</div>
    <div *ngIf="error" class="text-danger small">{{ error }}</div>

    <div *ngIf="result">
      <h6>Key Findings</h6>
      <p class="small" *ngIf="result.keyFindings">{{ result.keyFindings }}</p>

    <ul class="small mb-2" *ngIf="result.keyFinding1 || result.keyFinding2 || result.keyFinding3">
      <li *ngIf="result.keyFinding1">{{ result.keyFinding1 }}</li>
      <li *ngIf="result.keyFinding2">{{ result.keyFinding2 }}</li>
      <li *ngIf="result.keyFinding3">{{ result.keyFinding3 }}</li>
    </ul>

      <h6 class="mt-3">Extra Research Insights</h6>
      <ul class="small mb-2">
        <li>
          <strong>Confidence vs accuracy mismatch:</strong>
          High-confidence AI outputs do not always yield higher estimation accuracy;
          this is observed by contrasting verbose explanations with bias and error scores.
        </li>
        <li class="mt-1">
          <strong>Prompt sensitivity:</strong>
          Small changes in prompt wording can lead to noticeable variance in estimated effort,
          highlighting the importance of prompt engineering in industrial use.
        </li>
        <li class="mt-1">
          <strong>Temporal drift:</strong>
          Grouping experiments by issue creation time suggests model behaviour can drift as
          the underlying issue mix and complexity evolve.
        </li>
      </ul>

      <h6 class="mt-3">Future Work</h6>
      <p class="small" *ngIf="result.futureResearch">{{ result.futureResearch }}</p>

      <h6 class="mt-3">Thesis Slide Narrative</h6>
      <pre class="small bg-light p-2 border rounded" *ngIf="result.presentationText">{{ result.presentationText }}</pre>

      <h6 class="mt-3">Raw Summary Payload</h6>
      <pre class="small bg-light p-2 border rounded">{{ result | json }}</pre>
    </div>
  </div>
</div>
